---
editor_options:
  markdown:
    wrap: 72
---

# (PART\*) Section 2 {.unnumbered}

# Overview {.unnumbered}

::: {style="color: #333; font-size: 24px; font-style: italic; text-align: justify;"}
Section 2: Linear Regression and Prediction
:::

The practical in this section will make use of exercises adapted from the core textbook for this course:  

James, G., Witten, D., Hastie, T. and Tibshirani, R. (2021). *An
Introduction to Statistical Learning with Applications in R*. 2nd ed.
New York: Springer. <https://www.statlearning.com/>

::: ilos
**Learning Outcomes:**
-   indexing using base R;

:::

**You will practice using the functions below. It is highly recommended that you explore these functions further using the Help tab in your RStudio console.**

|    Function    |        Description         | Package |
|:--------------:|:--------------------------:|:-------:|
| `read.table()` |       read csv files       | base R  |
|  `read_csv()`  | read files in table format | base R  |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |
|                |                            |         |

# Practical 1 {.unnumbered}

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Find all <details> elements as potential containers of R input
    var detailElements = document.querySelectorAll('details.chunk-details');

    detailElements.forEach(function(details) {
        var nextElement = details.nextElementSibling;
        var elementToToggle = null;

        // Check if the nextElement is a textual R output
        if (nextElement && nextElement.matches('pre') && nextElement.textContent.trim().startsWith('##')) {
            elementToToggle = nextElement;
        }
        // Alternatively, check if the nextElement contains a graphical R output (plot)
        else if (nextElement && nextElement.querySelector('img')) {
            elementToToggle = nextElement;
        }

        // Proceed to create a toggle button only if a matching element is found
        if (elementToToggle) {
            var button = document.createElement('button');
            button.className = 'toggle-button';
            button.textContent = 'Show R Output';
            button.style.display = 'block';

            // Initially hide the R output/plot
            elementToToggle.style.display = 'none';

            button.onclick = function() {
                var isHidden = elementToToggle.style.display === 'none';
                elementToToggle.style.display = isHidden ? 'block' : 'none';
                button.textContent = isHidden ? 'Hide R Output' : 'Show R Output';
            };

            // Insert the toggle button immediately after the <details>
            details.parentNode.insertBefore(button, details.nextSibling);
        }
    });
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
    var answers = document.querySelectorAll('.answers');

    answers.forEach(function(answer) {
        // Create the toggle button
        var button = document.createElement('button');
        button.className = 'toggle-answer-button';
        button.textContent = 'Show Answer'; // Updated text content
        button.style.display = 'block'; // Ensure button is visible
        answer.style.display = 'none'; // Initially hide the answer

        // Add click event listener to the button
        button.onclick = function() {
            if (answer.style.display === 'none') {
                answer.style.display = 'block'; // Show the answer
                button.textContent = 'Hide Answer'; // Update button text
            } else {
                answer.style.display = 'none'; // Hide the answer
                button.textContent = 'Show Answer'; // Reset button text
            }
        };

        // Insert the button before the answer
        answer.parentNode.insertBefore(button, answer);
    });
});

</script>

::: file
For the tasks below, you will require the **Auto** dataset from the core
textbook (James et. al 2021).

Click here to download the file:
<a href="data/College.csv" download="Auto.data"> Auto.data </a>.
:::

This data file (text format) contains 398 observations of 9 variables.
The variables are:

-   mpg: miles per gallon
-   cylinders: Number of cylinders between 4 and 8
-   displacement: Engine displacement (cu. inches)
-   horsepower: Engine horsepower
-   weight: Vehicle weight (lbs.)
-   acceleration: Time to accelerate from 0 to 60 mph (sec.)
-   year: Model year
-   origin: Origin of car (1. American, 2. European, 3. Japanese)
-   name: Vehicle name

## Task 1 {.unnumbered}

Import the dataset in an object called **auto**. What function do you
think might be suitable for this type of file?


```r
auto <- read.table("data/Auto.data", header = TRUE)
```

::: question
Did you encounter any challenges when trying to import this file?
:::

::: answers
The easiest way to import this type of file is by using the `read.table()` base R function. Since the file already has column names, set the `header` argument to `TRUE`.
:::

## Task 2 {.unnumbered}

Use the `lm()` function to perform simple linear regression with **mpg** as the response and **horsepower** as the predictor. Store the output in an object called **fit**.


```r
fit <- lm(mpg ~ horsepower, data = auto)
```


## Task 3 {.unnumbered}

Have a look at the results of the model. 


```r
summary(fit)
```

```
## 
## Call:
## lm(formula = mpg ~ horsepower, data = auto)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -9.050 -2.183  0.000  1.778 14.533 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(>|t|)    
## (Intercept)      2.900e+01  1.814e+00  15.989  < 2e-16 ***
## horsepower100.0 -9.406e+00  2.063e+00  -4.559 7.48e-06 ***
## horsepower102.0 -9.000e+00  4.443e+00  -2.026 0.043663 *  
## horsepower103.0 -8.700e+00  4.443e+00  -1.958 0.051117 .  
## horsepower105.0 -8.500e+00  2.159e+00  -3.937 0.000102 ***
## horsepower107.0 -8.000e+00  4.443e+00  -1.801 0.072745 .  
## horsepower108.0 -1.000e+01  4.443e+00  -2.251 0.025110 *  
## horsepower110.0 -9.167e+00  2.050e+00  -4.471 1.10e-05 ***
## horsepower112.0 -9.333e+00  2.962e+00  -3.151 0.001788 ** 
## horsepower113.0 -3.000e+00  4.443e+00  -0.675 0.500024    
## horsepower115.0 -4.260e+00  2.565e+00  -1.661 0.097785 .  
## horsepower116.0 -3.600e+00  4.443e+00  -0.810 0.418396    
## horsepower120.0 -1.043e+01  2.721e+00  -3.832 0.000155 ***
## horsepower122.0 -9.000e+00  4.443e+00  -2.026 0.043663 *  
## horsepower125.0 -9.267e+00  2.962e+00  -3.129 0.001927 ** 
## horsepower129.0 -1.370e+01  3.393e+00  -4.038 6.85e-05 ***
## horsepower130.0 -1.380e+01  2.565e+00  -5.380 1.49e-07 ***
## horsepower132.0  3.700e+00  4.443e+00   0.833 0.405601    
## horsepower133.0 -1.280e+01  4.443e+00  -2.881 0.004246 ** 
## horsepower135.0 -1.080e+01  4.443e+00  -2.431 0.015639 *  
## horsepower137.0 -1.500e+01  4.443e+00  -3.376 0.000830 ***
## horsepower138.0 -1.250e+01  4.443e+00  -2.814 0.005219 ** 
## horsepower139.0 -9.850e+00  3.393e+00  -2.903 0.003969 ** 
## horsepower140.0 -1.266e+01  2.375e+00  -5.330 1.92e-07 ***
## horsepower142.0 -1.350e+01  4.443e+00  -3.039 0.002583 ** 
## horsepower145.0 -1.354e+01  2.375e+00  -5.703 2.80e-08 ***
## horsepower148.0 -1.500e+01  4.443e+00  -3.376 0.000830 ***
## horsepower149.0 -1.300e+01  4.443e+00  -2.926 0.003692 ** 
## horsepower150.0 -1.430e+01  2.009e+00  -7.115 8.14e-12 ***
## horsepower152.0 -1.450e+01  4.443e+00  -3.264 0.001225 ** 
## horsepower153.0 -1.500e+01  3.393e+00  -4.421 1.37e-05 ***
## horsepower155.0 -1.405e+01  3.393e+00  -4.141 4.49e-05 ***
## horsepower158.0 -1.600e+01  4.443e+00  -3.601 0.000370 ***
## horsepower160.0 -1.600e+01  3.393e+00  -4.715 3.69e-06 ***
## horsepower165.0 -1.408e+01  2.721e+00  -5.173 4.19e-07 ***
## horsepower167.0 -1.700e+01  4.443e+00  -3.826 0.000158 ***
## horsepower170.0 -1.450e+01  2.565e+00  -5.653 3.64e-08 ***
## horsepower175.0 -1.560e+01  2.565e+00  -6.082 3.57e-09 ***
## horsepower180.0 -1.550e+01  2.565e+00  -6.043 4.44e-09 ***
## horsepower190.0 -1.450e+01  2.962e+00  -4.896 1.60e-06 ***
## horsepower193.0 -2.000e+01  4.443e+00  -4.502 9.62e-06 ***
## horsepower198.0 -1.550e+01  3.393e+00  -4.568 7.17e-06 ***
## horsepower200.0 -1.900e+01  4.443e+00  -4.277 2.55e-05 ***
## horsepower208.0 -1.800e+01  4.443e+00  -4.052 6.47e-05 ***
## horsepower210.0 -1.800e+01  4.443e+00  -4.052 6.47e-05 ***
## horsepower215.0 -1.667e+01  2.962e+00  -5.627 4.17e-08 ***
## horsepower220.0 -1.500e+01  4.443e+00  -3.376 0.000830 ***
## horsepower225.0 -1.567e+01  2.962e+00  -5.290 2.35e-07 ***
## horsepower230.0 -1.300e+01  4.443e+00  -2.926 0.003692 ** 
## horsepower46.00 -3.000e+00  3.393e+00  -0.884 0.377330    
## horsepower48.00  1.460e+01  2.962e+00   4.929 1.36e-06 ***
## horsepower49.00 -7.014e-14  4.443e+00   0.000 1.000000    
## horsepower52.00  5.200e+00  2.721e+00   1.911 0.056904 .  
## horsepower53.00  4.000e+00  3.393e+00   1.179 0.239389    
## horsepower54.00 -6.000e+00  4.443e+00  -1.351 0.177856    
## horsepower58.00  8.550e+00  3.393e+00   2.520 0.012258 *  
## horsepower60.00  3.160e+00  2.565e+00   1.232 0.218917    
## horsepower61.00  3.000e+00  4.443e+00   0.675 0.500024    
## horsepower62.00  4.750e+00  3.393e+00   1.400 0.162577    
## horsepower63.00  5.400e+00  2.962e+00   1.823 0.069257 .  
## horsepower64.00  1.000e+01  4.443e+00   2.251 0.025110 *  
## horsepower65.00  6.480e+00  2.221e+00   2.917 0.003797 ** 
## horsepower66.00  7.100e+00  4.443e+00   1.598 0.111059    
## horsepower67.00  4.592e+00  2.159e+00   2.127 0.034230 *  
## horsepower68.00  3.183e+00  2.456e+00   1.296 0.195877    
## horsepower69.00  3.767e+00  2.962e+00   1.272 0.204440    
## horsepower70.00  3.475e+00  2.159e+00   1.610 0.108503    
## horsepower71.00  2.000e-02  2.565e+00   0.008 0.993784    
## horsepower72.00 -7.017e+00  2.456e+00  -2.857 0.004570 ** 
## horsepower74.00  4.533e+00  2.962e+00   1.531 0.126913    
## horsepower75.00  3.571e-02  2.113e+00   0.017 0.986525    
## horsepower76.00  2.050e+00  2.721e+00   0.754 0.451728    
## horsepower77.00 -3.600e+00  4.443e+00  -0.810 0.418396    
## horsepower78.00 -2.200e+00  2.456e+00  -0.896 0.371051    
## horsepower79.00 -2.000e+00  3.393e+00  -0.589 0.556021    
## horsepower80.00 -4.000e-01  2.375e+00  -0.168 0.866350    
## horsepower81.00 -4.500e+00  3.393e+00  -1.326 0.185776    
## horsepower82.00  2.000e+00  4.443e+00   0.450 0.652906    
## horsepower83.00 -8.750e-01  2.721e+00  -0.322 0.747962    
## horsepower84.00  1.133e+00  2.456e+00   0.461 0.644777    
## horsepower85.00 -5.533e+00  2.262e+00  -2.446 0.015010 *  
## horsepower86.00 -4.800e+00  2.565e+00  -1.871 0.062261 .  
## horsepower87.00 -6.000e+00  3.393e+00  -1.768 0.078025 .  
## horsepower88.00 -3.921e+00  2.038e+00  -1.924 0.055349 .  
## horsepower89.00 -3.500e+00  4.443e+00  -0.788 0.431426    
## horsepower90.00 -4.645e+00  2.028e+00  -2.291 0.022671 *  
## horsepower91.00 -9.000e+00  4.443e+00  -2.026 0.043663 *  
## horsepower92.00 -1.367e+00  2.456e+00  -0.557 0.578277    
## horsepower93.00 -3.000e+00  4.443e+00  -0.675 0.500024    
## horsepower94.00 -7.000e+00  4.443e+00  -1.576 0.116159    
## horsepower95.00 -6.886e+00  2.113e+00  -3.259 0.001246 ** 
## horsepower96.00 -1.833e+00  2.962e+00  -0.619 0.536388    
## horsepower97.00 -6.878e+00  2.262e+00  -3.040 0.002569 ** 
## horsepower98.00 -8.750e+00  3.393e+00  -2.579 0.010389 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 4.056 on 303 degrees of freedom
## Multiple R-squared:  0.7945,	Adjusted R-squared:  0.7314 
## F-statistic:  12.6 on 93 and 303 DF,  p-value: < 2.2e-16
```

:::question
Is there a relationship between the predictor and the response?
:::

::: answers
The slope coefficient (`-0.157845`) is statistically significant (`<2e-16 ***`). We can conclude that there is evidence to suggest a negative relationship between miles per gallon and engine horsepower. For a one-unit increase in engine horsepower, miles per gallon are reduced by 0.16.
:::

## Task 4 {.unnumbered}

For 

What is the predicted mpg associated with a horsepower of 98?
What are the associated 95% confidence and prediction intervals?
